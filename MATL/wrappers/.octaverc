% Overloaded functions which do not work because the built-ins are core
% functions rather than "built-ins": http://stackoverflow.com/a/37861790/670206

function varargout = imwrite(varargin)
    mlock;
    [varargout{1:nargout}] = builtin('imwrite', varargin{:});
endfunction

function varargout = disp(varargin)
    mlock;
    [varargout{1:nargout}] = builtin('disp', varargin{:});
endfunction

function varargout = pause(varargin)
    mlock;
    % Flush the output before calling pause
    builtin('disp', '[PAUSE]')
    [varargout{1:nargout}] = builtin('pause', varargin{:});
endfunction

function varargout = clc(varargin)
    mlock;
    builtin('disp', '[CLC]')
endfunction

pkg load image

% Hide all figures by default
set(0, 'DefaultFigureVisible', 'off')

% Hide all warnings
warning off

% Make sure we flush output immediately
page_screen_output(false);
page_output_immediately(true);
